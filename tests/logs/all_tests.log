2025-03-18 18:31:12,022 - INFO - Starting test suite for marker: all
2025-03-18 18:31:12,197 - INFO - Test Register Member - Input: {'name': 'Mostafa', 'email': 'mostafa@example.com', 'password': 'password123', 'role': 'Member'} - Output: {'message': 'User registered successfully'}
2025-03-18 18:31:12,290 - INFO - Test Register Librarian - Input: {'name': 'Ahmed', 'email': 'ahmed@library.com', 'password': 'password123', 'role': 'Librarian'} - Output: {'message': 'User registered successfully'}
2025-03-18 18:31:12,294 - INFO - Test Register Invalid Librarian Email - Input: {'name': 'InvalidLibrarian', 'email': 'invalid@example.com', 'password': 'password123', 'role': 'Librarian'} - Output: {'error': 'Invalid email for Librarian role'}
2025-03-18 18:31:12,387 - INFO - Test Register Duplicate Email - Input: {'name': 'DuplicateUser', 'email': 'duplicate@example.com', 'password': 'password123', 'role': 'Member'} - Output: {'error': 'A user with this email already exists'}
2025-03-18 18:31:12,564 - INFO - Test Login Valid Credentials - Input: {'email': 'loginuser@example.com', 'password': 'password123'} - Output: {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0MjMxNTQ3MiwianRpIjoiOTliM2YwMDEtNmM5Zi00ZDIyLTk2YTYtMDRhMTY4YzQ1NjYxIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6ImxvZ2ludXNlckBleGFtcGxlLmNvbSIsIm5iZiI6MTc0MjMxNTQ3MiwiY3NyZiI6IjMxMzI5NWRlLWM1MjYtNGY2MC05OTNhLTI5OTg1OGUzOTJiYSIsImV4cCI6MTc0MjMxNjM3Miwicm9sZSI6Ik1lbWJlciJ9.4kxMUqVYIgSRUHI5doQZjc9zpAq5I8WNUm9pBsDaxzg', 'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0MjMxNTQ3MiwianRpIjoiMTdjNDQyNTgtYzY4MS00NTAxLThkZmEtMDc1NDIwMDQ4NTgwIiwidHlwZSI6InJlZnJlc2giLCJzdWIiOiJsb2dpbnVzZXJAZXhhbXBsZS5jb20iLCJuYmYiOjE3NDIzMTU0NzIsImNzcmYiOiI3YWZjYjk3YS0yOGQwLTQ5MTUtYWI5OS1mZmM3OTkwNWNkMzkiLCJleHAiOjE3NDI5MjAyNzJ9.YwiY9N7oRG9-CHGOQk4VUrFWnD1WZzwoNzBMULSn6nA', 'role': 'Member'}
2025-03-18 18:31:12,568 - INFO - Test Login Invalid Credentials - Input: {'email': 'nonexistent@example.com', 'password': 'wrongpassword'} - Output: {'error': 'Invalid credentials'}
2025-03-18 18:31:12,747 - INFO - Test Token Refresh - Output: {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc0MjMxNTQ3MiwianRpIjoiYWZjZWMzMWUtZWQxMi00ZmFmLTg0Y2MtZGY5MDM4ZDk3OWQxIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6InJlZnJlc2h1c2VyQGV4YW1wbGUuY29tIiwibmJmIjoxNzQyMzE1NDcyLCJjc3JmIjoiNTVmYzRhYjctNDUyNi00YzRkLTk5NjItMjFiMDAyMTU3MGZkIiwiZXhwIjoxNzQyMzE2MzcyfQ.VNGNnFHX339Omcm05hSYgu15Bdga2qOF3C56c_tiqRY'}
2025-03-18 18:31:12,964 - INFO - Librarian registered and logged in successfully for TestAddBook.
2025-03-18 18:31:12,975 - INFO - Test Add Book - Input: {'title': 'Book Three', 'author': 'Author Three', 'subject_category': 'History', 'publication_date': '2019-07-20'} - Output: {'barcode': 'a8d7f62f-c305-4a74-b84e-03daba9ad287', 'book_id': 1, 'message': 'Book added successfully'}
2025-03-18 18:31:12,979 - INFO - Test Add Book Missing Fields - Input: {'title': 'Incomplete Book'} - Output: {'error': 'Missing required fields'}
2025-03-18 18:31:12,982 - INFO - Test Add Duplicate Book - Input: {'title': 'Book Three', 'author': 'Author Three', 'subject_category': 'History', 'publication_date': '2019-07-20'} - Output: {'error': 'A book with the same title and author already exists'}
2025-03-18 18:31:13,163 - INFO - Books added successfully for TestGetBooks.
2025-03-18 18:31:13,172 - INFO - Test Get All Books - Output: {'books': [{'author': 'Author Three', 'available_copies': 0, 'barcode': 'a8d7f62f-c305-4a74-b84e-03daba9ad287', 'id': 1, 'publication_date': '2019-07-20', 'subject_category': 'History', 'title': 'Book Three', 'total_copies': 0}, {'author': 'Author Five', 'available_copies': 0, 'barcode': '56977427-c4f4-40c7-bf73-a08b1cf08d7a', 'id': 2, 'publication_date': '2017-03-15', 'subject_category': 'Philosophy', 'title': 'Book Five', 'total_copies': 0}, {'author': 'Author Six', 'available_copies': 0, 'barcode': '782e4b8a-791e-480e-8116-eeb083ee36ad', 'id': 3, 'publication_date': '2016-09-10', 'subject_category': 'Mathematics', 'title': 'Book Six', 'total_copies': 0}]}
2025-03-18 18:31:13,180 - INFO - Test Get Book by Barcode - Output: {'author': 'Author Three', 'available_copies': 0, 'barcode': 'a8d7f62f-c305-4a74-b84e-03daba9ad287', 'id': 1, 'publication_date': '2019-07-20', 'subject_category': 'History', 'title': 'Book Three', 'total_copies': 0}
2025-03-18 18:31:13,364 - INFO - Books added successfully for TestModifyBook.
2025-03-18 18:31:13,375 - INFO - Test Modify Book - Input: {'title': 'Updated Book Title', 'author': 'Updated Author'} - Output: {'message': 'Book updated successfully'}
2025-03-18 18:31:13,378 - INFO - Test Modify Nonexistent Book - Input: {'title': 'Nonexistent Book', 'author': 'Nonexistent Author'} - Output: {'error': 'Book not found'}
2025-03-18 18:31:13,560 - INFO - Books added successfully for TestDeleteBook.
2025-03-18 18:31:13,574 - INFO - Test Delete Book - Output: {'message': 'Book and all its copies deleted successfully'}
2025-03-18 18:31:13,578 - INFO - Test Delete Nonexistent Book - Output: {'error': 'Book not found'}
2025-03-18 18:31:13,756 - INFO - Book added successfully for TestCreateBookCopy.
2025-03-18 18:31:13,769 - INFO - Test Create Book Copy - Input: {'rack_location': 'A1'} - Output: {'message': 'Book copy created successfully'}
2025-03-18 18:31:13,772 - INFO - Test Create Book Copy Nonexistent Book - Input: {'rack_location': 'B2'} - Output: {'error': 'Book not found'}
2025-03-18 18:31:13,954 - INFO - Book and book copy added successfully for TestModifyBookCopy.
2025-03-18 18:31:13,968 - INFO - Test Modify Book Copy - Input: {'rack_location': 'D4', 'is_available': False} - Output: {'message': 'Book copy modified successfully'}
2025-03-18 18:31:13,971 - INFO - Test Modify Nonexistent Book Copy - Input: {'rack_location': 'E5', 'is_available': True} - Output: {'error': 'Book not found'}
2025-03-18 18:31:14,152 - INFO - Book and book copy added successfully for TestDeleteBookCopy.
2025-03-18 18:31:14,170 - INFO - Test Delete Book Copy - Output: {'message': 'Book copy deleted successfully'}
2025-03-18 18:31:14,172 - INFO - Test Delete Nonexistent Book Copy - Output: {'error': 'Book not found'}
2025-03-18 18:31:14,406 - INFO - Books added successfully for TestSearchBooks.
2025-03-18 18:31:14,412 - INFO - Search by Title - Output: {'books': [{'author': 'F. Scott Fitzgerald', 'available_copies': 0, 'barcode': '7f24b1a9-d759-447d-af99-aaaa587e94de', 'id': 1, 'publication_date': '1925-04-10', 'subject_category': 'Fiction', 'title': 'The Great Gatsby', 'total_copies': 0}]}
2025-03-18 18:31:14,416 - INFO - Search by Author - Output: {'books': [{'author': 'Harper Lee', 'available_copies': 0, 'barcode': '7b52ac82-9893-400a-b8d7-93ebf822c022', 'id': 2, 'publication_date': '1960-07-11', 'subject_category': 'Fiction', 'title': 'To Kill a Mockingbird', 'total_copies': 0}]}
2025-03-18 18:31:14,420 - INFO - Search by Subject Category - Output: {'books': [{'author': 'Stephen Hawking', 'available_copies': 0, 'barcode': '13b80397-1816-4f57-a1a0-b8b73550a6a2', 'id': 3, 'publication_date': '1988-03-01', 'subject_category': 'Science', 'title': 'A Brief History of Time', 'total_copies': 0}]}
2025-03-18 18:31:14,425 - INFO - Search by Publication Date - Output: {'books': [{'author': 'F. Scott Fitzgerald', 'available_copies': 0, 'barcode': '7f24b1a9-d759-447d-af99-aaaa587e94de', 'id': 1, 'publication_date': '1925-04-10', 'subject_category': 'Fiction', 'title': 'The Great Gatsby', 'total_copies': 0}]}
2025-03-18 18:31:14,429 - INFO - Search with Multiple Filters - Output: {'books': [{'author': 'F. Scott Fitzgerald', 'available_copies': 0, 'barcode': '7f24b1a9-d759-447d-af99-aaaa587e94de', 'id': 1, 'publication_date': '1925-04-10', 'subject_category': 'Fiction', 'title': 'The Great Gatsby', 'total_copies': 0}]}
2025-03-18 18:31:14,435 - INFO - Search with No Filters - Output: {'books': [{'author': 'F. Scott Fitzgerald', 'available_copies': 0, 'barcode': '7f24b1a9-d759-447d-af99-aaaa587e94de', 'id': 1, 'publication_date': '1925-04-10', 'subject_category': 'Fiction', 'title': 'The Great Gatsby', 'total_copies': 0}, {'author': 'Harper Lee', 'available_copies': 0, 'barcode': '7b52ac82-9893-400a-b8d7-93ebf822c022', 'id': 2, 'publication_date': '1960-07-11', 'subject_category': 'Fiction', 'title': 'To Kill a Mockingbird', 'total_copies': 0}, {'author': 'Stephen Hawking', 'available_copies': 0, 'barcode': '13b80397-1816-4f57-a1a0-b8b73550a6a2', 'id': 3, 'publication_date': '1988-03-01', 'subject_category': 'Science', 'title': 'A Brief History of Time', 'total_copies': 0}]}
2025-03-18 18:31:14,438 - INFO - Search with No Results - Output: {'books': []}
2025-03-18 18:31:14,483 - INFO - Setting up user management test suite...
2025-03-18 18:31:14,751 - INFO - User management test suite setup complete.
2025-03-18 18:31:14,753 - INFO - Test Get All Users - Output: [{'barcode': '18f29bf2-de2a-4636-a08c-568dafa75835', 'email': 'member1@example.com', 'name': 'Member One', 'role': 'Member'}, {'barcode': 'dbff4329-680f-498a-bb21-baffb9666236', 'email': 'member2@example.com', 'name': 'Member Two', 'role': 'Member'}, {'barcode': 'ecfa6e3b-0712-4d2f-b112-1edeb98b60f6', 'email': 'librarian1@library.com', 'name': 'Librarian One', 'role': 'Librarian'}]
2025-03-18 18:31:14,758 - INFO - Test Get User By Barcode - Output: {'barcode': '18f29bf2-de2a-4636-a08c-568dafa75835', 'email': 'member1@example.com', 'name': 'Member One', 'role': 'Member'}
2025-03-18 18:31:14,761 - INFO - Test Get User By Invalid Barcode - Output: {'error': 'User not found'}
2025-03-18 18:31:14,772 - INFO - Test Delete Member By Barcode - Output: {'message': 'User deleted successfully'}
2025-03-18 18:31:14,778 - INFO - Test Prevent Deleting Librarian - Output: {'error': 'Cannot delete a Librarian'}
2025-03-18 18:31:14,781 - INFO - Test Delete User With Invalid Barcode - Output: {'error': 'User not found'}
